{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\src\\\\components\\\\ProductsHome.jsx\";\n\nimport axios from 'axios';\nimport React, { useEffect, useReducer } from 'react';\nimport logger from 'use-reducer-logger'; //import { products } from '../data'\n\nimport ProductHome from './ProductHome';\nimport '../styles/productshome.css';\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return _objectSpread({}, state, {\n        loading: true\n      });\n\n    case 'FETCH_SUCCESS':\n      return _objectSpread({}, state, {\n        products: action.payload,\n        loading: false\n      });\n\n    case 'FETCH_FAIL':\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar ProductsHome = function ProductsHome() {\n  var _useReducer = useReducer(logger(reducer), {\n    products: [],\n    loading: true,\n    error: ''\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      _useReducer2$ = _useReducer2[0],\n      loading = _useReducer2$.loading,\n      error = _useReducer2$.error,\n      products = _useReducer2$.products,\n      dispatch = _useReducer2[1]; //const [products, setProducts] = useState([]); //default is empty database or json, no products\n\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dispatch({\n                  type: 'FETCH_REQUEST'\n                });\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get('/api/products');\n\n              case 4:\n                result = _context.sent;\n                dispatch({\n                  type: 'FETCH_SUCCESS',\n                  payload: result.data\n                });\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                dispatch({\n                  type: 'FETCH_FAIL',\n                  payload: _context.t0.message\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 8]]);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hps-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Latest Products\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hps-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"loading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 20\n    }\n  }, \"Loading...\") : error ? /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 72\n    }\n  }, error) : products.slice(-8).map(function (item) {\n    return /*#__PURE__*/React.createElement(ProductHome, {\n      item: item,\n      key: item._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    });\n  })));\n};\n\nexport default ProductsHome;","map":{"version":3,"sources":["D:/tutos/Mern_shop/frontend/src/components/ProductsHome.jsx"],"names":["axios","React","useEffect","useReducer","logger","ProductHome","reducer","state","action","type","loading","products","payload","error","ProductsHome","dispatch","fetchData","get","result","data","message","slice","map","item","_id"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport React, { useEffect, useReducer} from 'react'\r\nimport logger from 'use-reducer-logger'\r\n//import { products } from '../data'\r\nimport ProductHome from './ProductHome'\r\nimport '../styles/productshome.css';\r\n\r\nconst reducer = (state, action) => {\r\n  switch(action.type) {\r\n    case 'FETCH_REQUEST':\r\n      return {...state, loading: true};\r\n    case 'FETCH_SUCCESS':\r\n      return {...state, products: action.payload, loading: false};\r\n    case 'FETCH_FAIL':\r\n      return {...state, loading: false, error: action.payload};\r\n      default:\r\n        return state;\r\n  }\r\n}\r\n\r\nconst ProductsHome = () => {\r\n\r\n  const [{loading, error, products}, dispatch] = useReducer(logger(reducer), {\r\n    products: [],\r\n    loading: true,\r\n    error: ''\r\n  });\r\n\r\n  //const [products, setProducts] = useState([]); //default is empty database or json, no products\r\n\r\n  useEffect(() => {\r\n\r\n    const fetchData = async () => {\r\n      dispatch({type: 'FETCH_REQUEST'});\r\n      try {\r\n        const result = await axios.get('/api/products');\r\n        dispatch({type: 'FETCH_SUCCESS', payload: result.data});\r\n      } catch(err) {\r\n        dispatch({type: 'FETCH_FAIL', payload: err.message});\r\n      }\r\n      \r\n      //setProducts(result.data);\r\n    }\r\n    fetchData();\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <div className='hps-container'>\r\n        <h2>Latest Products</h2>\r\n      <div className=\"hps-row\">\r\n        {/* 0, 8 is first 8, but for latest 8 is -8 */}\r\n        {\r\n        loading ? (<h1 className='loading'>Loading...</h1>) : error ? (<h1 className='error'>{error}</h1>) : (\r\n          products.slice(-8).map((item) => (\r\n            <ProductHome item={item} key={item._id} />\r\n        ))\r\n        )\r\n        }\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductsHome\r\n"]},"metadata":{},"sourceType":"module"}