{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\src\\\\components\\\\ProductShop.jsx\";\n\nimport axios from 'axios';\nimport { faHeart, faShoppingBag } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Store } from '../Store';\nimport '../styles/productshop.css';\n\nvar ProductShop = function ProductShop(_ref) {\n  var item = _ref.item;\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      ctxDispatch = _useContext.dispatch;\n\n  var cart = state.cart,\n      wish = state.wish;\n\n  var addToCartHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var existItem, quantity, _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              existItem = cart.cartItems.find(function (x) {\n                return x._id === item._id;\n              });\n              quantity = existItem ? existItem.quantity + 1 : 1; //if existItem than quantity + 1 in cart if not than 1\n              //this you can put but you donâ€™t have to\n\n              _context.next = 4;\n              return axios.get(\"/api/products/slug/\".concat(item.slug));\n\n            case 4:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              if (!(data.countInStock < quantity)) {\n                _context.next = 9;\n                break;\n              }\n\n              window.alert('Sorry. Product is out of stock.');\n              return _context.abrupt(\"return\");\n\n            case 9:\n              ctxDispatch({\n                type: 'CART_ADD_ITEM',\n                payload: _objectSpread({}, item, {\n                  quantity: quantity\n                })\n              });\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function addToCartHandler() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var addToWishHandler = function addToWishHandler() {\n    var existItem = wish.wishItems.find(function (x) {\n      return x._id === item._id;\n    });\n    var quantity = existItem ? existItem.quantity : 1; //const { data } = await axios.get(`/api/products/slug/${product.slug}`);\n\n    if (existItem) {\n      window.alert('Sorry. You have already added the product to your wish list.');\n      return;\n    }\n\n    ctxDispatch({\n      type: 'WISH_ADD_ITEM',\n      payload: _objectSpread({}, item, {\n        quantity: quantity\n      })\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ps-card\",\n    key: item._id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/product/\".concat(item.slug),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: item.image,\n    alt: item.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, item.title), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"$\", item.price)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faHeart,\n    onClick: addToWishHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  })), item.countInStock === 0 ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cart cart-out\",\n    disabled: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, \"Out of stock\") : /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faShoppingBag,\n    onClick: addToCartHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 27\n    }\n  }))));\n};\n\nexport default ProductShop;","map":{"version":3,"sources":["D:/tutos/Mern_shop/frontend/src/components/ProductShop.jsx"],"names":["axios","faHeart","faShoppingBag","FontAwesomeIcon","React","useContext","Link","Store","ProductShop","item","state","ctxDispatch","dispatch","cart","wish","addToCartHandler","existItem","cartItems","find","x","_id","quantity","get","slug","data","countInStock","window","alert","type","payload","addToWishHandler","wishItems","image","title","price"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { faHeart, faShoppingBag } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport React, { useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Store } from '../Store'\r\nimport '../styles/productshop.css'\r\n\r\nconst ProductShop = ({item}) => {\r\n\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n    const {cart, wish} = state;\r\n    const addToCartHandler = async () => {\r\n        const existItem = cart.cartItems.find((x) => x._id === item._id);\r\n        const quantity = existItem ? existItem.quantity + 1 : 1; //if existItem than quantity + 1 in cart if not than 1\r\n        \r\n        //this you can put but you donâ€™t have to\r\n        const { data } = await axios.get(`/api/products/slug/${item.slug}`);\r\n        if (data.countInStock < quantity) {\r\n            window.alert('Sorry. Product is out of stock.');\r\n            return;\r\n        }\r\n\r\n        ctxDispatch({\r\n        type: 'CART_ADD_ITEM',\r\n        payload: { ...item, quantity },\r\n        });\r\n    };\r\n\r\n    const addToWishHandler = () => {\r\n\r\n        const existItem = wish.wishItems.find((x) => x._id === item._id);\r\n        const quantity = existItem ? existItem.quantity : 1;\r\n        \r\n        //const { data } = await axios.get(`/api/products/slug/${product.slug}`);\r\n        if (existItem) {\r\n            window.alert('Sorry. You have already added the product to your wish list.');\r\n            return;\r\n        }\r\n        \r\n        ctxDispatch({\r\n          type: 'WISH_ADD_ITEM',\r\n          payload: { ...item, quantity },\r\n          });\r\n    }\r\n\r\n  return (\r\n    <div className='ps-card' key={item._id}>\r\n        <div className=\"card-header\">\r\n            <Link to={`/product/${item.slug}`}>\r\n              <img src={item.image} alt={item.title} />\r\n            </Link>\r\n        </div>\r\n        <div className=\"card-body\">\r\n            <h3 className=\"title\">{item.title}</h3>\r\n            <span>${item.price}</span>\r\n        </div>\r\n        <div className=\"card-footer\">\r\n            <button><FontAwesomeIcon icon={faHeart} onClick={addToWishHandler} /></button>\r\n            {item.countInStock === 0 ? (\r\n                  <button className='cart cart-out' disabled >Out of stock</button>\r\n                ) : (\r\n                  <button><FontAwesomeIcon icon={faShoppingBag} onClick={addToCartHandler}/></button>)\r\n            }\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductShop\r\n"]},"metadata":{},"sourceType":"module"}