{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\tutos\\\\Mern_shop\\\\frontend\\\\src\\\\components\\\\OrderDetails.jsx\";\n\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport Footer from './Footer';\nimport LoadingBox from './LoadingBox';\nimport MessageBox from './MessageBox';\nimport Navbar from './Navbar';\nimport '../styles/orderdetails.css';\nimport { Store } from '../Store';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { getError } from '../utils';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return _objectSpread({}, state, {\n        loading: true,\n        error: ''\n      });\n\n    case 'FETCH_SUCCESS':\n      return _objectSpread({}, state, {\n        loading: false,\n        order: action.payload,\n        error: ''\n      });\n\n    case 'FETCH_FAIL':\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload\n      });\n\n    default:\n      return state;\n  }\n}\n\nvar OrderDetails = function OrderDetails() {\n  var _useContext = useContext(Store),\n      state = _useContext.state;\n\n  var userInfo = state.userInfo;\n  var params = useParams();\n  var orderId = params.id;\n  var navigate = useNavigate();\n\n  var _useReducer = useReducer(reducer, {\n    loading: true,\n    order: {},\n    error: ''\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      _useReducer2$ = _useReducer2[0],\n      loading = _useReducer2$.loading,\n      error = _useReducer2$.error,\n      order = _useReducer2$.order,\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    var fetchOrder = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$axios$get, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                dispatch({\n                  type: 'FETCH_REQUEST'\n                });\n                _context.next = 4;\n                return axios.get(\"/api/orders/\".concat(orderId), {\n                  headers: {\n                    authorization: \"Bearer \".concat(userInfo.token)\n                  }\n                });\n\n              case 4:\n                _yield$axios$get = _context.sent;\n                data = _yield$axios$get.data;\n                dispatch({\n                  type: 'FETCH_SUCCESS',\n                  payload: data\n                });\n                _context.next = 12;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](0);\n                dispatch({\n                  type: 'FETCH_FAIL',\n                  payload: getError(_context.t0)\n                });\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 9]]);\n      }));\n\n      return function fetchOrder() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    if (!userInfo) {\n      return navigate('/login');\n    }\n\n    if (!order._id || order._id && order._id !== orderId) {\n      fetchOrder();\n    }\n  }, [order, userInfo, orderId, navigate]);\n  return loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 16\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 54\n    }\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-details-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-details-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-details-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"order-details-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, \"Your Order\"), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"order-details-subtitle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Order ID: \", orderId))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-shipping\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"order-shipping-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, \"Shipping:\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"order-shipping-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, order.shippingAddress.fullName, \", \", order.shippingAddress.address, \", \", order.shippingAddress.postalCode, \", \", order.shippingAddress.city, \", \", order.shippingAddress.country), order.isPaid ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 46\n    }\n  }, \" Paid at \", order.deliveredAt, \" \") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Not Delivery\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-payment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"Payment:\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }, order.paymentMethod, \" - \"), order.isPaid ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 46\n    }\n  }, \" Paid at \", order.paidAt, \" \") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, \"Not Paid \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 48\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"after\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 54\n    }\n  }, \"* You will pay after delivery\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-items\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"order-items-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, \"Items:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-cards\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, order.orderItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"order-card\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"order-card-body\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.image,\n      alt: item.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"order-card-footer\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 45\n      }\n    }, item.quantity), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 45\n      }\n    }, \"$\", item.price)));\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"order-summary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, \"Order Summary\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-summary-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Items\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, \"$\", order.itemsPrice.toFixed(2))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-summary-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"Shipping\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, \"$\", order.shippingPrice.toFixed(2))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-summary-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \"Tax\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, \"$\", order.taxPrice.toFixed(2))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-summary-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"$\", order.totalPrice.toFixed(2)))))), /*#__PURE__*/React.createElement(Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default OrderDetails;","map":{"version":3,"sources":["D:/tutos/Mern_shop/frontend/src/components/OrderDetails.jsx"],"names":["React","useContext","useEffect","useReducer","Footer","LoadingBox","MessageBox","Navbar","Store","useNavigate","useParams","axios","getError","reducer","state","action","type","loading","error","order","payload","OrderDetails","userInfo","params","orderId","id","navigate","dispatch","fetchOrder","get","headers","authorization","token","data","_id","shippingAddress","fullName","address","postalCode","city","country","isPaid","deliveredAt","paymentMethod","paidAt","orderItems","map","item","image","name","quantity","price","itemsPrice","toFixed","shippingPrice","taxPrice","totalPrice"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useReducer } from 'react'\r\nimport Footer from './Footer'\r\nimport LoadingBox from './LoadingBox'\r\nimport MessageBox from './MessageBox'\r\nimport Navbar from './Navbar'\r\nimport '../styles/orderdetails.css'\r\nimport { Store } from '../Store'\r\nimport { useNavigate, useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport { getError } from '../utils'\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n      case 'FETCH_REQUEST':\r\n        return { ...state, loading: true, error: '' };\r\n      case 'FETCH_SUCCESS':\r\n        return { ...state, loading: false, order: action.payload, error: '' };\r\n      case 'FETCH_FAIL':\r\n        return { ...state, loading: false, error: action.payload };\r\n  \r\n      default:\r\n        return state;\r\n    }\r\n}\r\n\r\nconst OrderDetails = () => {\r\n\r\n  const { state } = useContext(Store);\r\n  const { userInfo } = state;\r\n\r\n  const params = useParams();\r\n  const { id: orderId } = params;\r\n  const navigate = useNavigate();\r\n\r\n  const [{ loading, error, order }, dispatch] = useReducer(reducer, {\r\n    loading: true,\r\n    order: {},\r\n    error: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchOrder = async () => {\r\n      try {\r\n        dispatch({ type: 'FETCH_REQUEST' });\r\n        const { data } = await axios.get(`/api/orders/${orderId}`, {\r\n          headers: { authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        dispatch({ type: 'FETCH_SUCCESS', payload: data });\r\n      } catch (err) {\r\n        dispatch({ type: 'FETCH_FAIL', payload: getError(err) });\r\n      }\r\n    };\r\n\r\n    if (!userInfo) {\r\n      return navigate('/login');\r\n    }\r\n    if (!order._id || (order._id && order._id !== orderId)) {\r\n      fetchOrder();\r\n    }\r\n  }, [order, userInfo, orderId, navigate]);\r\n\r\n  return (\r\n    loading ? (<LoadingBox></LoadingBox>) : error ? (<MessageBox>{error}</MessageBox>) : (\r\n        <>\r\n            <Navbar />\r\n                <div className=\"order-details-container\">\r\n                    <div className=\"order-details-row\">\r\n                        <div className=\"order-details-col\">\r\n                            <h2 className=\"order-details-title\">Your Order</h2>\r\n                            <h4 className=\"order-details-subtitle\">Order ID: {orderId}</h4>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"order-row\">\r\n                    <div className=\"order-col\">\r\n                        <div className=\"order-shipping\">\r\n                            <h4 className=\"order-shipping-title\">Shipping:</h4>\r\n                            <p className=\"order-shipping-info\">{order.shippingAddress.fullName}, {order.shippingAddress.address}, {order.shippingAddress.postalCode}, {order.shippingAddress.city}, {order.shippingAddress.country}</p>\r\n                            {order.isPaid ? (<span> Paid at {order.deliveredAt} </span>) : (\r\n                                <span>Not Delivery</span>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"order-payment\">\r\n                            <h4>Payment:</h4>\r\n                            <span>{order.paymentMethod} - </span>\r\n                            {order.isPaid ? (<span> Paid at {order.paidAt} </span>) : (\r\n                                <span>Not Paid <br /><span className='after'>* You will pay after delivery</span></span>\r\n                            )}\r\n                            \r\n                        </div>\r\n                        <div className=\"order-items\">\r\n                            <h4 className=\"order-items-title\">Items:</h4>\r\n                            <div className=\"order-cards\">\r\n                                {order.orderItems.map((item) => (\r\n                                    <div className=\"order-card\">\r\n                                        <div className=\"order-card-body\">\r\n                                            <img src={item.image} alt={item.name} />\r\n                                        </div>\r\n                                        <div className=\"order-card-footer\">\r\n                                            <span>{item.quantity}</span>\r\n                                            <span>${item.price}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"order-col\">\r\n                        <h2 className='order-summary'>Order Summary</h2>\r\n                        <div className=\"order-summary-info\">\r\n                            <h4>Items</h4>\r\n                            <span>${order.itemsPrice.toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"order-summary-info\">\r\n                            <h4>Shipping</h4>\r\n                            <span>${order.shippingPrice.toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"order-summary-info\">\r\n                            <h4>Tax</h4>\r\n                            <span>${order.taxPrice.toFixed(2)}</span>\r\n                        </div>\r\n                        <div className=\"order-summary-info\">\r\n                            <h3>Total</h3>\r\n                            <span>${order.totalPrice.toFixed(2)}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            <Footer />\r\n        </>\r\n    )\r\n  )\r\n}\r\n\r\nexport default OrderDetails\r\n"]},"metadata":{},"sourceType":"module"}